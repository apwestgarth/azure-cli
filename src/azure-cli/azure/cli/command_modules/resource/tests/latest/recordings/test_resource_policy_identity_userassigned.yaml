interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - identity create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --tags
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-11-10.0.26100-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_policy_identity_userassigned000001?api-version=2024-11-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001","name":"cli_test_policy_identity_userassigned000001","type":"Microsoft.Resources/resourceGroups","location":"westus","tags":{"product":"azurecli","cause":"automation","test":"test_resource_policy_identity_userassigned","date":"2025-11-26T23:17:54Z","module":"resource"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '436'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 26 Nov 2025 23:17:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-global-reads:
      - '16499'
      x-msedge-ref:
      - 'Ref A: 042F8FBDE555419388B88B610654CBA5 Ref B: MWH011020808025 Ref C: 2025-11-26T23:17:57Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"tags": {"tag1": "d1"}, "location": "westus"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - identity create
      Connection:
      - keep-alive
      Content-Length:
      - '46'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g -n --tags
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-11-10.0.26100-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/policyCliTestMsi?api-version=2024-11-30
  response:
    body:
      string: '{"location":"westus","tags":{"tag1":"d1"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/policyCliTestMsi","name":"policyCliTestMsi","type":"Microsoft.ManagedIdentity/userAssignedIdentities","properties":{"isolationScope":"None","tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","principalId":"bc9147f3-b586-4911-9a5d-8e91784932b7","clientId":"b37729d0-8b0b-40f4-8674-9613b18920cd"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '512'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 26 Nov 2025 23:17:59 GMT
      expires:
      - '-1'
      location:
      - /subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/policyCliTestMsi
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=a16ec1df-b555-4191-bf58-04352f47c61d/westus/f9f45468-12cb-477a-a6fe-c7c94a305056
      x-ms-ratelimit-remaining-subscription-global-writes:
      - '11999'
      x-ms-ratelimit-remaining-subscription-writes:
      - '799'
      x-msedge-ref:
      - 'Ref A: B54CB0D485354AA7B871693DBBA5D2A5 Ref B: MWH011020808034 Ref C: 2025-11-26T23:17:57Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy definition show
      Connection:
      - keep-alive
      ParameterSetName:
      - --name
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-11-10.0.26100-SP0)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d?api-version=2024-05-01
  response:
    body:
      string: '{"properties":{"displayName":"Audit VMs that do not use managed disks","policyType":"BuiltIn","mode":"All","description":"This
        policy audits VMs that do not use managed disks","metadata":{"version":"1.0.0","category":"Compute"},"version":"1.0.0","parameters":{},"policyRule":{"if":{"anyOf":[{"allOf":[{"field":"type","equals":"Microsoft.Compute/virtualMachines"},{"field":"Microsoft.Compute/virtualMachines/osDisk.uri","exists":"True"}]},{"allOf":[{"field":"type","equals":"Microsoft.Compute/VirtualMachineScaleSets"},{"anyOf":[{"field":"Microsoft.Compute/VirtualMachineScaleSets/osDisk.vhdContainers","exists":"True"},{"field":"Microsoft.Compute/VirtualMachineScaleSets/osdisk.imageUrl","exists":"True"}]}]}]},"then":{"effect":"audit"}},"versions":["1.0.0"]},"id":"/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d","type":"Microsoft.Authorization/policyDefinitions","name":"06a78e20-9358-41c9-923c-fb736d382a4d"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '954'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 26 Nov 2025 23:17:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - ''
      x-msedge-ref:
      - 'Ref A: 4FBD40E1F0FD4DC58C1C80B334DA84F5 Ref B: CO6AA3150217053 Ref C: 2025-11-26T23:18:00Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"identity": {"userAssignedIdentities": {"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/policyCliTestMsi":
      {}}, "type": "UserAssigned"}, "location": "westus", "properties": {"enforcementMode":
      "DoNotEnforce", "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy assignment create
      Connection:
      - keep-alive
      Content-Length:
      - '448'
      Content-Type:
      - application/json
      ParameterSetName:
      - --policy -n -g --location --mi-user-assigned --enforcement-mode
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-11-10.0.26100-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002?api-version=2024-05-01
  response:
    body:
      string: '{"identity":{"type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/policyCliTestMsi":{"principalId":"bc9147f3-b586-4911-9a5d-8e91784932b7","clientId":"b37729d0-8b0b-40f4-8674-9613b18920cd"}}},"properties":{"policyDefinitionId":"/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d","definitionVersion":"1.*.*","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001","metadata":{"createdBy":"a16ec1df-b555-4191-bf58-04352f47c61d","createdOn":"2025-11-26T23:18:01.3316895Z","updatedBy":null,"updatedOn":null},"enforcementMode":"DoNotEnforce"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002","type":"Microsoft.Authorization/policyAssignments","name":"azurecli-test-assignment000002","location":"westus","systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-11-26T23:18:00.5014046Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-11-26T23:18:00.5014046Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1344'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 26 Nov 2025 23:18:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=a16ec1df-b555-4191-bf58-04352f47c61d/westus2/37e259fa-e1b4-4855-8ada-caf6a47a9f19
      x-ms-ratelimit-remaining-subscription-global-writes:
      - '11999'
      x-ms-ratelimit-remaining-subscription-writes:
      - '799'
      x-msedge-ref:
      - 'Ref A: 6916FFADFE144682A674ACD07A7591FB Ref B: MWH011020806054 Ref C: 2025-11-26T23:18:00Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy assignment identity show
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-11-10.0.26100-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002?api-version=2024-05-01
  response:
    body:
      string: '{"identity":{"type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/policyCliTestMsi":{"principalId":"bc9147f3-b586-4911-9a5d-8e91784932b7","clientId":"b37729d0-8b0b-40f4-8674-9613b18920cd"}}},"properties":{"policyDefinitionId":"/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d","definitionVersion":"1.*.*","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001","metadata":{"createdBy":"a16ec1df-b555-4191-bf58-04352f47c61d","createdOn":"2025-11-26T23:18:01.3316895Z","updatedBy":null,"updatedOn":null},"enforcementMode":"DoNotEnforce"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002","type":"Microsoft.Authorization/policyAssignments","name":"azurecli-test-assignment000002","location":"westus","systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-11-26T23:18:00.5014046Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-11-26T23:18:00.5014046Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1344'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 26 Nov 2025 23:18:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=a16ec1df-b555-4191-bf58-04352f47c61d/westus/6b2111d8-3438-4c9d-a80e-221d73054db4
      x-ms-ratelimit-remaining-subscription-global-reads:
      - '16499'
      x-msedge-ref:
      - 'Ref A: 7111E304BDC943E68BD2FF57468E4FD3 Ref B: MWH011020807040 Ref C: 2025-11-26T23:18:01Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy assignment update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --description
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-11-10.0.26100-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002?api-version=2024-05-01
  response:
    body:
      string: '{"identity":{"type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/policyCliTestMsi":{"principalId":"bc9147f3-b586-4911-9a5d-8e91784932b7","clientId":"b37729d0-8b0b-40f4-8674-9613b18920cd"}}},"properties":{"policyDefinitionId":"/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d","definitionVersion":"1.*.*","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001","metadata":{"createdBy":"a16ec1df-b555-4191-bf58-04352f47c61d","createdOn":"2025-11-26T23:18:01.3316895Z","updatedBy":null,"updatedOn":null},"enforcementMode":"DoNotEnforce"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002","type":"Microsoft.Authorization/policyAssignments","name":"azurecli-test-assignment000002","location":"westus","systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-11-26T23:18:00.5014046Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-11-26T23:18:00.5014046Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1344'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 26 Nov 2025 23:18:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=a16ec1df-b555-4191-bf58-04352f47c61d/westeurope/1d6aeeb3-243b-4846-9fed-a938b88ab0a0
      x-ms-ratelimit-remaining-subscription-global-reads:
      - '16499'
      x-msedge-ref:
      - 'Ref A: B8A2B193A1C241918B75471D228A2E27 Ref B: MWH011020806036 Ref C: 2025-11-26T23:18:02Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"identity": {"type": "UserAssigned", "userAssignedIdentities": {"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/policyCliTestMsi":
      {}}}, "location": "westus", "properties": {"definitionVersion": "1.*.*", "description":
      "New description", "enforcementMode": "DoNotEnforce", "metadata": {"createdBy":
      "a16ec1df-b555-4191-bf58-04352f47c61d", "createdOn": "2025-11-26T23:18:01.3316895Z"},
      "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy assignment update
      Connection:
      - keep-alive
      Content-Length:
      - '624'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --description
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-11-10.0.26100-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002?api-version=2024-05-01
  response:
    body:
      string: '{"identity":{"type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/policyCliTestMsi":{"principalId":"bc9147f3-b586-4911-9a5d-8e91784932b7","clientId":"b37729d0-8b0b-40f4-8674-9613b18920cd"}}},"properties":{"policyDefinitionId":"/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d","definitionVersion":"1.*.*","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001","description":"New
        description","metadata":{"createdBy":"a16ec1df-b555-4191-bf58-04352f47c61d","createdOn":"2025-11-26T23:18:01.3316895Z","updatedBy":"a16ec1df-b555-4191-bf58-04352f47c61d","updatedOn":"2025-11-26T23:18:02.8924299Z"},"enforcementMode":"DoNotEnforce"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002","type":"Microsoft.Authorization/policyAssignments","name":"azurecli-test-assignment000002","location":"westus","systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-11-26T23:18:00.5014046Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-11-26T23:18:02.6903345Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1436'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 26 Nov 2025 23:18:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=a16ec1df-b555-4191-bf58-04352f47c61d/westus/d0acfea7-8228-42c5-86b1-0eea1d0c80cd
      x-ms-ratelimit-remaining-subscription-global-writes:
      - '11999'
      x-ms-ratelimit-remaining-subscription-writes:
      - '799'
      x-msedge-ref:
      - 'Ref A: DAA280BC4DA9425588649692A9B7DE3E Ref B: MWH011020806052 Ref C: 2025-11-26T23:18:02Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy assignment identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --user-assigned
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-11-10.0.26100-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002?api-version=2024-05-01
  response:
    body:
      string: '{"identity":{"type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/policyCliTestMsi":{"principalId":"bc9147f3-b586-4911-9a5d-8e91784932b7","clientId":"b37729d0-8b0b-40f4-8674-9613b18920cd"}}},"properties":{"policyDefinitionId":"/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d","definitionVersion":"1.*.*","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001","description":"New
        description","metadata":{"createdBy":"a16ec1df-b555-4191-bf58-04352f47c61d","createdOn":"2025-11-26T23:18:01.3316895Z","updatedBy":"a16ec1df-b555-4191-bf58-04352f47c61d","updatedOn":"2025-11-26T23:18:02.8924299Z"},"enforcementMode":"DoNotEnforce"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002","type":"Microsoft.Authorization/policyAssignments","name":"azurecli-test-assignment000002","location":"westus","systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-11-26T23:18:00.5014046Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-11-26T23:18:02.6903345Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1436'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 26 Nov 2025 23:18:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=a16ec1df-b555-4191-bf58-04352f47c61d/westus/b2670eb9-34d8-44f0-9c47-978ca5fd26fe
      x-ms-ratelimit-remaining-subscription-global-reads:
      - '16499'
      x-msedge-ref:
      - 'Ref A: EBC891D290ED4A848E066717B9B7A22D Ref B: MWH011020807040 Ref C: 2025-11-26T23:18:03Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"identity": {"type": "None"}, "location": "westus", "properties": {"definitionVersion":
      "1.*.*", "description": "New description", "enforcementMode": "DoNotEnforce",
      "metadata": {"createdBy": "a16ec1df-b555-4191-bf58-04352f47c61d", "createdOn":
      "2025-11-26T23:18:01.3316895Z", "updatedBy": "a16ec1df-b555-4191-bf58-04352f47c61d",
      "updatedOn": "2025-11-26T23:18:02.8924299Z"}, "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy assignment identity remove
      Connection:
      - keep-alive
      Content-Length:
      - '492'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --user-assigned
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-11-10.0.26100-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002?api-version=2024-05-01
  response:
    body:
      string: '{"identity":{"type":"None"},"properties":{"policyDefinitionId":"/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d","definitionVersion":"1.*.*","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001","description":"New
        description","metadata":{"createdBy":"a16ec1df-b555-4191-bf58-04352f47c61d","createdOn":"2025-11-26T23:18:01.3316895Z","updatedBy":"a16ec1df-b555-4191-bf58-04352f47c61d","updatedOn":"2025-11-26T23:18:03.7633228Z"},"enforcementMode":"DoNotEnforce"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002","type":"Microsoft.Authorization/policyAssignments","name":"azurecli-test-assignment000002","location":"westus","systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-11-26T23:18:00.5014046Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-11-26T23:18:03.7359888Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1107'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 26 Nov 2025 23:18:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=a16ec1df-b555-4191-bf58-04352f47c61d/westus/fce66a78-6e5b-4c57-8a84-f5271a18abb2
      x-ms-ratelimit-remaining-subscription-global-writes:
      - '11999'
      x-ms-ratelimit-remaining-subscription-writes:
      - '799'
      x-msedge-ref:
      - 'Ref A: AAC7DE833C4842C09FFD3491D9DF093E Ref B: MWH011020807062 Ref C: 2025-11-26T23:18:03Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy assignment show
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-11-10.0.26100-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002?api-version=2024-05-01
  response:
    body:
      string: '{"identity":{"type":"None"},"properties":{"policyDefinitionId":"/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d","definitionVersion":"1.*.*","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001","description":"New
        description","metadata":{"createdBy":"a16ec1df-b555-4191-bf58-04352f47c61d","createdOn":"2025-11-26T23:18:01.3316895Z","updatedBy":"a16ec1df-b555-4191-bf58-04352f47c61d","updatedOn":"2025-11-26T23:18:03.7633228Z"},"enforcementMode":"DoNotEnforce"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002","type":"Microsoft.Authorization/policyAssignments","name":"azurecli-test-assignment000002","location":"westus","systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-11-26T23:18:00.5014046Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-11-26T23:18:03.7359888Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1107'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 26 Nov 2025 23:18:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=a16ec1df-b555-4191-bf58-04352f47c61d/westus2/827595b1-fb2e-43b4-811e-1244a05127ef
      x-ms-ratelimit-remaining-subscription-global-reads:
      - '16499'
      x-msedge-ref:
      - 'Ref A: 00B7C1A1ADB84C23BCCE4370760551B3 Ref B: CO6AA3150217047 Ref C: 2025-11-26T23:18:04Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy assignment identity assign
      Connection:
      - keep-alive
      ParameterSetName:
      - --user-assigned -n -g
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-11-10.0.26100-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002?api-version=2024-05-01
  response:
    body:
      string: '{"identity":{"type":"None"},"properties":{"policyDefinitionId":"/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d","definitionVersion":"1.*.*","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001","description":"New
        description","metadata":{"createdBy":"a16ec1df-b555-4191-bf58-04352f47c61d","createdOn":"2025-11-26T23:18:01.3316895Z","updatedBy":"a16ec1df-b555-4191-bf58-04352f47c61d","updatedOn":"2025-11-26T23:18:03.7633228Z"},"enforcementMode":"DoNotEnforce"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002","type":"Microsoft.Authorization/policyAssignments","name":"azurecli-test-assignment000002","location":"westus","systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-11-26T23:18:00.5014046Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-11-26T23:18:03.7359888Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1107'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 26 Nov 2025 23:18:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=a16ec1df-b555-4191-bf58-04352f47c61d/westus/cb3fa569-f371-47f8-87af-1a5df35d59a9
      x-ms-ratelimit-remaining-subscription-global-reads:
      - '16499'
      x-msedge-ref:
      - 'Ref A: FB18A6383BDC4298B1A98B6744433E62 Ref B: MWH011020807029 Ref C: 2025-11-26T23:18:04Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"identity": {"userAssignedIdentities": {"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/policyCliTestMsi":
      {}}, "type": "UserAssigned"}, "location": "westus", "properties": {"definitionVersion":
      "1.*.*", "description": "New description", "enforcementMode": "DoNotEnforce",
      "metadata": {"createdBy": "a16ec1df-b555-4191-bf58-04352f47c61d", "createdOn":
      "2025-11-26T23:18:01.3316895Z", "updatedBy": "a16ec1df-b555-4191-bf58-04352f47c61d",
      "updatedOn": "2025-11-26T23:18:03.7633228Z"}, "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy assignment identity assign
      Connection:
      - keep-alive
      Content-Length:
      - '722'
      Content-Type:
      - application/json
      ParameterSetName:
      - --user-assigned -n -g
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-11-10.0.26100-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002?api-version=2024-05-01
  response:
    body:
      string: '{"identity":{"type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/policyCliTestMsi":{"principalId":"bc9147f3-b586-4911-9a5d-8e91784932b7","clientId":"b37729d0-8b0b-40f4-8674-9613b18920cd"}}},"properties":{"policyDefinitionId":"/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d","definitionVersion":"1.*.*","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001","description":"New
        description","metadata":{"createdBy":"a16ec1df-b555-4191-bf58-04352f47c61d","createdOn":"2025-11-26T23:18:01.3316895Z","updatedBy":"a16ec1df-b555-4191-bf58-04352f47c61d","updatedOn":"2025-11-26T23:18:05.5974987Z"},"enforcementMode":"DoNotEnforce"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002","type":"Microsoft.Authorization/policyAssignments","name":"azurecli-test-assignment000002","location":"westus","systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-11-26T23:18:00.5014046Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-11-26T23:18:04.8090453Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1436'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 26 Nov 2025 23:18:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=a16ec1df-b555-4191-bf58-04352f47c61d/westus2/5f784f8c-126a-433b-90e4-43efe82bd342
      x-ms-ratelimit-remaining-subscription-global-writes:
      - '11999'
      x-ms-ratelimit-remaining-subscription-writes:
      - '799'
      x-msedge-ref:
      - 'Ref A: 42B7D4352D9447C18862CB0370835283 Ref B: CO6AA3150220029 Ref C: 2025-11-26T23:18:04Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy assignment show
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-11-10.0.26100-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002?api-version=2024-05-01
  response:
    body:
      string: '{"identity":{"type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/policyCliTestMsi":{"principalId":"bc9147f3-b586-4911-9a5d-8e91784932b7","clientId":"b37729d0-8b0b-40f4-8674-9613b18920cd"}}},"properties":{"policyDefinitionId":"/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d","definitionVersion":"1.*.*","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001","description":"New
        description","metadata":{"createdBy":"a16ec1df-b555-4191-bf58-04352f47c61d","createdOn":"2025-11-26T23:18:01.3316895Z","updatedBy":"a16ec1df-b555-4191-bf58-04352f47c61d","updatedOn":"2025-11-26T23:18:05.5974987Z"},"enforcementMode":"DoNotEnforce"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002","type":"Microsoft.Authorization/policyAssignments","name":"azurecli-test-assignment000002","location":"westus","systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-11-26T23:18:00.5014046Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-11-26T23:18:04.8090453Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1436'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 26 Nov 2025 23:18:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=a16ec1df-b555-4191-bf58-04352f47c61d/eastus2euap/04b08896-6993-4c5d-8e2c-f329f239cd93
      x-ms-throttling-version:
      - v2
      x-msedge-ref:
      - 'Ref A: 01AD6D96AE90457C9068FCFD145FC82C Ref B: CO6AA3150219051 Ref C: 2025-11-26T23:18:06Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy assignment identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --user-assigned
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-11-10.0.26100-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002?api-version=2024-05-01
  response:
    body:
      string: '{"identity":{"type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/policyCliTestMsi":{"principalId":"bc9147f3-b586-4911-9a5d-8e91784932b7","clientId":"b37729d0-8b0b-40f4-8674-9613b18920cd"}}},"properties":{"policyDefinitionId":"/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d","definitionVersion":"1.*.*","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001","description":"New
        description","metadata":{"createdBy":"a16ec1df-b555-4191-bf58-04352f47c61d","createdOn":"2025-11-26T23:18:01.3316895Z","updatedBy":"a16ec1df-b555-4191-bf58-04352f47c61d","updatedOn":"2025-11-26T23:18:05.5974987Z"},"enforcementMode":"DoNotEnforce"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002","type":"Microsoft.Authorization/policyAssignments","name":"azurecli-test-assignment000002","location":"westus","systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-11-26T23:18:00.5014046Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-11-26T23:18:04.8090453Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1436'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 26 Nov 2025 23:18:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=a16ec1df-b555-4191-bf58-04352f47c61d/westus/f6ebc5ac-c7c0-49b6-8579-67ec4dab0278
      x-ms-ratelimit-remaining-subscription-global-reads:
      - '16499'
      x-msedge-ref:
      - 'Ref A: 8C78A16E3C1D4260A56E2ADFD0B28427 Ref B: CO6AA3150219025 Ref C: 2025-11-26T23:18:06Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"identity": {"type": "None"}, "location": "westus", "properties": {"definitionVersion":
      "1.*.*", "description": "New description", "enforcementMode": "DoNotEnforce",
      "metadata": {"createdBy": "a16ec1df-b555-4191-bf58-04352f47c61d", "createdOn":
      "2025-11-26T23:18:01.3316895Z", "updatedBy": "a16ec1df-b555-4191-bf58-04352f47c61d",
      "updatedOn": "2025-11-26T23:18:05.5974987Z"}, "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy assignment identity remove
      Connection:
      - keep-alive
      Content-Length:
      - '492'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --user-assigned
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-11-10.0.26100-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002?api-version=2024-05-01
  response:
    body:
      string: '{"identity":{"type":"None"},"properties":{"policyDefinitionId":"/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d","definitionVersion":"1.*.*","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001","description":"New
        description","metadata":{"createdBy":"a16ec1df-b555-4191-bf58-04352f47c61d","createdOn":"2025-11-26T23:18:01.3316895Z","updatedBy":"a16ec1df-b555-4191-bf58-04352f47c61d","updatedOn":"2025-11-26T23:18:06.8084632Z"},"enforcementMode":"DoNotEnforce"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002","type":"Microsoft.Authorization/policyAssignments","name":"azurecli-test-assignment000002","location":"westus","systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-11-26T23:18:00.5014046Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-11-26T23:18:06.7873626Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1107'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 26 Nov 2025 23:18:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=a16ec1df-b555-4191-bf58-04352f47c61d/westus/96f39bfc-69ed-4681-89c7-933bcf5d484b
      x-ms-ratelimit-remaining-subscription-global-writes:
      - '11999'
      x-ms-ratelimit-remaining-subscription-writes:
      - '799'
      x-msedge-ref:
      - 'Ref A: 5898C0E757AF436C9B90CF6270678D5A Ref B: CO6AA3150219051 Ref C: 2025-11-26T23:18:06Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy assignment identity assign
      Connection:
      - keep-alive
      ParameterSetName:
      - --system-assigned -n -g
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-11-10.0.26100-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002?api-version=2024-05-01
  response:
    body:
      string: '{"identity":{"type":"None"},"properties":{"policyDefinitionId":"/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d","definitionVersion":"1.*.*","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001","description":"New
        description","metadata":{"createdBy":"a16ec1df-b555-4191-bf58-04352f47c61d","createdOn":"2025-11-26T23:18:01.3316895Z","updatedBy":"a16ec1df-b555-4191-bf58-04352f47c61d","updatedOn":"2025-11-26T23:18:06.8084632Z"},"enforcementMode":"DoNotEnforce"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002","type":"Microsoft.Authorization/policyAssignments","name":"azurecli-test-assignment000002","location":"westus","systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-11-26T23:18:00.5014046Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-11-26T23:18:06.7873626Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1107'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 26 Nov 2025 23:18:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=a16ec1df-b555-4191-bf58-04352f47c61d/westus/f9a4f87d-eca4-4600-94cc-7f79b53020d3
      x-ms-ratelimit-remaining-subscription-global-reads:
      - '16499'
      x-msedge-ref:
      - 'Ref A: 74A0562FA6E044558266276AA9D1C688 Ref B: CO6AA3150219033 Ref C: 2025-11-26T23:18:07Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"identity": {"type": "SystemAssigned"}, "location": "westus", "properties":
      {"definitionVersion": "1.*.*", "description": "New description", "enforcementMode":
      "DoNotEnforce", "metadata": {"createdBy": "a16ec1df-b555-4191-bf58-04352f47c61d",
      "createdOn": "2025-11-26T23:18:01.3316895Z", "updatedBy": "a16ec1df-b555-4191-bf58-04352f47c61d",
      "updatedOn": "2025-11-26T23:18:06.8084632Z"}, "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy assignment identity assign
      Connection:
      - keep-alive
      Content-Length:
      - '502'
      Content-Type:
      - application/json
      ParameterSetName:
      - --system-assigned -n -g
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-11-10.0.26100-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002?api-version=2024-05-01
  response:
    body:
      string: '{"identity":{"principalId":"bbb5b6fb-4be0-499d-84e1-09937dec2db3","tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned"},"properties":{"policyDefinitionId":"/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d","definitionVersion":"1.*.*","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001","description":"New
        description","metadata":{"createdBy":"a16ec1df-b555-4191-bf58-04352f47c61d","createdOn":"2025-11-26T23:18:01.3316895Z","updatedBy":"a16ec1df-b555-4191-bf58-04352f47c61d","updatedOn":"2025-11-26T23:18:08.7582057Z"},"enforcementMode":"DoNotEnforce"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002","type":"Microsoft.Authorization/policyAssignments","name":"azurecli-test-assignment000002","location":"westus","systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-11-26T23:18:00.5014046Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-11-26T23:18:07.7020062Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1220'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 26 Nov 2025 23:18:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=a16ec1df-b555-4191-bf58-04352f47c61d/westus/e039b028-b65e-4454-959e-bfec73f19282
      x-ms-ratelimit-remaining-subscription-global-writes:
      - '11999'
      x-ms-ratelimit-remaining-subscription-writes:
      - '799'
      x-msedge-ref:
      - 'Ref A: 07DA144DA6604C828E3C1534276E882A Ref B: CO6AA3150217009 Ref C: 2025-11-26T23:18:07Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy assignment show
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-11-10.0.26100-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002?api-version=2024-05-01
  response:
    body:
      string: '{"identity":{"principalId":"bbb5b6fb-4be0-499d-84e1-09937dec2db3","tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned"},"properties":{"policyDefinitionId":"/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d","definitionVersion":"1.*.*","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001","description":"New
        description","metadata":{"createdBy":"a16ec1df-b555-4191-bf58-04352f47c61d","createdOn":"2025-11-26T23:18:01.3316895Z","updatedBy":"a16ec1df-b555-4191-bf58-04352f47c61d","updatedOn":"2025-11-26T23:18:08.7582057Z"},"enforcementMode":"DoNotEnforce"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002","type":"Microsoft.Authorization/policyAssignments","name":"azurecli-test-assignment000002","location":"westus","systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-11-26T23:18:00.5014046Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-11-26T23:18:07.7020062Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1220'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 26 Nov 2025 23:18:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=a16ec1df-b555-4191-bf58-04352f47c61d/westus/ff9e9015-e0d6-4a55-bf47-e127b457d765
      x-ms-ratelimit-remaining-subscription-global-reads:
      - '16499'
      x-msedge-ref:
      - 'Ref A: 61ECCE2A30FB4D38929004F7C362AC37 Ref B: MWH011020808029 Ref C: 2025-11-26T23:18:09Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy assignment identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-11-10.0.26100-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002?api-version=2024-05-01
  response:
    body:
      string: '{"identity":{"principalId":"bbb5b6fb-4be0-499d-84e1-09937dec2db3","tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned"},"properties":{"policyDefinitionId":"/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d","definitionVersion":"1.*.*","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001","description":"New
        description","metadata":{"createdBy":"a16ec1df-b555-4191-bf58-04352f47c61d","createdOn":"2025-11-26T23:18:01.3316895Z","updatedBy":"a16ec1df-b555-4191-bf58-04352f47c61d","updatedOn":"2025-11-26T23:18:08.7582057Z"},"enforcementMode":"DoNotEnforce"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002","type":"Microsoft.Authorization/policyAssignments","name":"azurecli-test-assignment000002","location":"westus","systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-11-26T23:18:00.5014046Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-11-26T23:18:07.7020062Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1220'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 26 Nov 2025 23:18:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=a16ec1df-b555-4191-bf58-04352f47c61d/westus/9ac223ec-3734-4db0-803b-3cab4447b99b
      x-ms-ratelimit-remaining-subscription-global-reads:
      - '16499'
      x-msedge-ref:
      - 'Ref A: 6D5A585A49794C26B315E47A13A74BB1 Ref B: MWH011020808052 Ref C: 2025-11-26T23:18:09Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"identity": {"type": "None"}, "location": "westus", "properties": {"definitionVersion":
      "1.*.*", "description": "New description", "enforcementMode": "DoNotEnforce",
      "metadata": {"createdBy": "a16ec1df-b555-4191-bf58-04352f47c61d", "createdOn":
      "2025-11-26T23:18:01.3316895Z", "updatedBy": "a16ec1df-b555-4191-bf58-04352f47c61d",
      "updatedOn": "2025-11-26T23:18:08.7582057Z"}, "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy assignment identity remove
      Connection:
      - keep-alive
      Content-Length:
      - '492'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-11-10.0.26100-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002?api-version=2024-05-01
  response:
    body:
      string: '{"identity":{"type":"None"},"properties":{"policyDefinitionId":"/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d","definitionVersion":"1.*.*","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001","description":"New
        description","metadata":{"createdBy":"a16ec1df-b555-4191-bf58-04352f47c61d","createdOn":"2025-11-26T23:18:01.3316895Z","updatedBy":"a16ec1df-b555-4191-bf58-04352f47c61d","updatedOn":"2025-11-26T23:18:11.0980269Z"},"enforcementMode":"DoNotEnforce"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002","type":"Microsoft.Authorization/policyAssignments","name":"azurecli-test-assignment000002","location":"westus","systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-11-26T23:18:00.5014046Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-11-26T23:18:09.6305375Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1107'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 26 Nov 2025 23:18:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=a16ec1df-b555-4191-bf58-04352f47c61d/westus/28381ed9-e7e2-49b0-87d0-0ff9e4682889
      x-ms-ratelimit-remaining-subscription-global-writes:
      - '11999'
      x-ms-ratelimit-remaining-subscription-writes:
      - '799'
      x-msedge-ref:
      - 'Ref A: A6D2FC7D161443AFB2D13879988076A5 Ref B: MWH011020806052 Ref C: 2025-11-26T23:18:09Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy assignment delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.80.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-11-10.0.26100-SP0)
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002?api-version=2024-05-01
  response:
    body:
      string: '{"identity":{"type":"None"},"properties":{"policyDefinitionId":"/providers/Microsoft.Authorization/policyDefinitions/06a78e20-9358-41c9-923c-fb736d382a4d","definitionVersion":"1.*.*","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001","description":"New
        description","metadata":{"createdBy":"a16ec1df-b555-4191-bf58-04352f47c61d","createdOn":"2025-11-26T23:18:01.3316895Z","updatedBy":"a16ec1df-b555-4191-bf58-04352f47c61d","updatedOn":"2025-11-26T23:18:11.0980269Z"},"enforcementMode":"DoNotEnforce"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_policy_identity_userassigned000001/providers/Microsoft.Authorization/policyAssignments/azurecli-test-assignment000002","type":"Microsoft.Authorization/policyAssignments","name":"azurecli-test-assignment000002","location":"westus","systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-11-26T23:18:00.5014046Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-11-26T23:18:09.6305375Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1107'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 26 Nov 2025 23:18:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=a16ec1df-b555-4191-bf58-04352f47c61d/westeurope/52f59f1f-b7da-4948-b886-75cb732565fc
      x-ms-ratelimit-remaining-subscription-deletes:
      - '799'
      x-ms-ratelimit-remaining-subscription-global-deletes:
      - '11999'
      x-msedge-ref:
      - 'Ref A: D2E284565E1C430185BDDADCD0B61E7A Ref B: MWH011020808036 Ref C: 2025-11-26T23:18:11Z'
    status:
      code: 200
      message: OK
version: 1
