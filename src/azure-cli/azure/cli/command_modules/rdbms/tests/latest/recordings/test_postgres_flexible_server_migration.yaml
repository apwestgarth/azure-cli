interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - postgres flexible-server migration check-name-availability
      Connection:
      - keep-alive
      ParameterSetName:
      - --subscription --resource-group --name --migration-name
      User-Agent:
      - AZURECLI/2.81.0 azsdk-python-core/1.35.0 Python/3.13.10 (Windows-11-10.0.26200-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap?api-version=2025-08-01
  response:
    body:
      string: '{"sku":{"name":"Standard_D4s_v3","tier":"GeneralPurpose"},"systemData":{"createdAt":"2023-06-15T13:30:19.1651160Z"},"properties":{"replica":{"role":"Primary","capacity":5},"storage":{"type":"","iops":120,"tier":"P4","storageSizeGB":32,"autoGrow":"Disabled"},"network":{"publicNetworkAccess":"Enabled"},"dataEncryption":{"type":"SystemManaged"},"authConfig":{"activeDirectoryAuth":"Disabled","passwordAuth":"Enabled"},"fullyQualifiedDomainName":"autobot-e2e-pg-fs-eastus2euap.postgres.database.azure.com","version":"13","minorVersion":"23","administratorLogin":"portaltestuser","state":"Ready","availabilityZone":"2","backup":{"backupRetentionDays":7,"geoRedundantBackup":"Enabled","earliestRestoreDate":"2025-12-01T22:55:29.9140438+00:00"},"highAvailability":{"mode":"Disabled","state":"NotEnabled"},"maintenanceWindow":{"customWindow":"Disabled","dayOfWeek":0,"startHour":0,"startMinute":0},"replicationRole":"Primary","replicaCapacity":5},"location":"East
        US 2 EUAP","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap","name":"autobot-e2e-pg-fs-eastus2euap","type":"Microsoft.DBforPostgreSQL/flexibleServers"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1252'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sun, 07 Dec 2025 23:36:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-throttling-version:
      - v2
      x-msedge-ref:
      - 'Ref A: CABBFD04939547C49ABFCCD8C6406A93 Ref B: MNZ221060609031 Ref C: 2025-12-07T23:36:21Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"name": "30799ac7-f723-4bf5-930d-34d1affac030", "type": "Microsoft.DBforPostgreSQL/flexibleServers/migrations"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - postgres flexible-server migration check-name-availability
      Connection:
      - keep-alive
      Content-Length:
      - '112'
      Content-Type:
      - application/json
      ParameterSetName:
      - --subscription --resource-group --name --migration-name
      User-Agent:
      - AZURECLI/2.81.0 azsdk-python-core/1.35.0 Python/3.13.10 (Windows-11-10.0.26200-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap/checkMigrationNameAvailability?api-version=2025-08-01
  response:
    body:
      string: '{"name":"30799ac7-f723-4bf5-930d-34d1affac030","type":"Microsoft.DBforPostgreSQL/flexibleServers/migrations","nameAvailable":true}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '130'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sun, 07 Dec 2025 23:36:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=f57d2932-2a78-450f-958a-e65997c3253b/eastus2euap/8ab0cef8-fb2a-47cd-a19c-b6c27525c0aa
      x-ms-ratelimit-remaining-subscription-writes:
      - '799'
      x-ms-throttling-version:
      - v2
      x-msedge-ref:
      - 'Ref A: 1675F8ACC53F4B8C95EDC3C7EAF1CF34 Ref B: MNZ221060619051 Ref C: 2025-12-07T23:36:22Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - postgres flexible-server migration create
      Connection:
      - keep-alive
      ParameterSetName:
      - --subscription --resource-group --name --migration-name --properties
      User-Agent:
      - AZURECLI/2.81.0 azsdk-python-core/1.35.0 Python/3.13.10 (Windows-11-10.0.26200-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap?api-version=2025-08-01
  response:
    body:
      string: '{"sku":{"name":"Standard_D4s_v3","tier":"GeneralPurpose"},"systemData":{"createdAt":"2023-06-15T13:30:19.1651160Z"},"properties":{"replica":{"role":"Primary","capacity":5},"storage":{"type":"","iops":120,"tier":"P4","storageSizeGB":32,"autoGrow":"Disabled"},"network":{"publicNetworkAccess":"Enabled"},"dataEncryption":{"type":"SystemManaged"},"authConfig":{"activeDirectoryAuth":"Disabled","passwordAuth":"Enabled"},"fullyQualifiedDomainName":"autobot-e2e-pg-fs-eastus2euap.postgres.database.azure.com","version":"13","minorVersion":"23","administratorLogin":"portaltestuser","state":"Ready","availabilityZone":"2","backup":{"backupRetentionDays":7,"geoRedundantBackup":"Enabled","earliestRestoreDate":"2025-12-01T22:55:29.9140438+00:00"},"highAvailability":{"mode":"Disabled","state":"NotEnabled"},"maintenanceWindow":{"customWindow":"Disabled","dayOfWeek":0,"startHour":0,"startMinute":0},"replicationRole":"Primary","replicaCapacity":5},"location":"East
        US 2 EUAP","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap","name":"autobot-e2e-pg-fs-eastus2euap","type":"Microsoft.DBforPostgreSQL/flexibleServers"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1252'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sun, 07 Dec 2025 23:36:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-throttling-version:
      - v2
      x-msedge-ref:
      - 'Ref A: 1A4F213299D64E31962FE0673198FCE9 Ref B: BL2AA2011004031 Ref C: 2025-12-07T23:36:22Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - postgres flexible-server migration create
      Connection:
      - keep-alive
      ParameterSetName:
      - --subscription --resource-group --name --migration-name --properties
      User-Agent:
      - AZURECLI/2.81.0 azsdk-python-core/1.35.0 Python/3.13.10 (Windows-11-10.0.26200-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/autobot-resourcegroup-pg-eastus2euap?api-version=2024-11-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Sun, 07 Dec 2025 23:36:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-throttling-version:
      - v2
      x-msedge-ref:
      - 'Ref A: DA869272F28746139C71C7EECE4729A8 Ref B: BL2AA2011006031 Ref C: 2025-12-07T23:36:22Z'
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - postgres flexible-server migration create
      Connection:
      - keep-alive
      ParameterSetName:
      - --subscription --resource-group --name --migration-name --properties
      User-Agent:
      - AZURECLI/2.81.0 azsdk-python-core/1.35.0 Python/3.13.10 (Windows-11-10.0.26200-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/autobot-resourcegroup-pg-eastus2euap?api-version=2024-11-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap","name":"autobot-resourcegroup-pg-eastus2euap","type":"Microsoft.Resources/resourceGroups","location":"eastus2euap","properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '274'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sun, 07 Dec 2025 23:36:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-throttling-version:
      - v2
      x-msedge-ref:
      - 'Ref A: A7E1B54C2C804A9B81C37D915A7404C3 Ref B: MNZ221060608023 Ref C: 2025-12-07T23:36:23Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"sourceDbServerResourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-singleserver-resourcegroup/providers/Microsoft.DBforPostgreSQL/servers/autobot-orcas-postgresql-ss",
      "secretParameters": {"adminCredentials": {"sourceServerPassword": "XXXXXXXXX",
      "targetServerPassword": "XXXXXXXXX"}, "sourceServerUsername": "autobot@autobot-orcas-postgresql-ss",
      "targetServerUsername": "portaltestuser"}, "dbsToMigrate": ["postgres"], "setupLogicalReplicationOnSourceDbIfNeeded":
      "False", "overwriteDbsInTarget": "True", "migrationMode": "offline"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - postgres flexible-server migration create
      Connection:
      - keep-alive
      Content-Length:
      - '588'
      Content-Type:
      - application/json
      ParameterSetName:
      - --subscription --resource-group --name --migration-name --properties
      User-Agent:
      - AZURECLI/2.81.0 azsdk-python-core/1.35.0 Python/3.13.10 (Windows-11-10.0.26200-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap/migrations/30799ac7-f723-4bf5-930d-34d1affac030?api-version=2025-08-01
  response:
    body:
      string: '{"properties":{"migrationId":"fea9ad5c-8777-4632-8084-89aa434e6066","currentStatus":{"state":"InProgress"},"migrationMode":"Offline","sourceDbServerResourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-singleserver-resourcegroup/providers/Microsoft.DBforPostgreSQL/servers/autobot-orcas-postgresql-ss","targetDbServerResourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap","dbsToMigrate":["postgres"],"setupLogicalReplicationOnSourceDbIfNeeded":"False","overwriteDbsInTarget":"True","migrationWindowStartTimeInUtc":"2025-12-07T23:36:23.9782489Z","triggerCutover":"True","migrationOption":"ValidateAndMigrate","sourceType":"PostgreSQLSingleServer","sslMode":"VerifyFull"},"location":"East
        US 2 EUAP","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap/migrations/30799ac7-f723-4bf5-930d-34d1affac030","name":"30799ac7-f723-4bf5-930d-34d1affac030","type":"Microsoft.DBforPostgreSQL/flexibleServers/migrations"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1226'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sun, 07 Dec 2025 23:36:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=f57d2932-2a78-450f-958a-e65997c3253b/eastus2euap/6f83d9fe-08e5-486b-b139-e078a9ca0a3e
      x-ms-ratelimit-remaining-subscription-writes:
      - '799'
      x-ms-throttling-version:
      - v2
      x-msedge-ref:
      - 'Ref A: 5449BB2AF5A149C0B2F38087C2171A2F Ref B: MNZ221060610039 Ref C: 2025-12-07T23:36:23Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - postgres flexible-server migration list
      Connection:
      - keep-alive
      ParameterSetName:
      - --subscription --resource-group --name --filter
      User-Agent:
      - AZURECLI/2.81.0 azsdk-python-core/1.35.0 Python/3.13.10 (Windows-11-10.0.26200-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap?api-version=2025-08-01
  response:
    body:
      string: '{"sku":{"name":"Standard_D4s_v3","tier":"GeneralPurpose"},"systemData":{"createdAt":"2023-06-15T13:30:19.1651160Z"},"properties":{"replica":{"role":"Primary","capacity":5},"storage":{"type":"","iops":120,"tier":"P4","storageSizeGB":32,"autoGrow":"Disabled"},"network":{"publicNetworkAccess":"Enabled"},"dataEncryption":{"type":"SystemManaged"},"authConfig":{"activeDirectoryAuth":"Disabled","passwordAuth":"Enabled"},"fullyQualifiedDomainName":"autobot-e2e-pg-fs-eastus2euap.postgres.database.azure.com","version":"13","minorVersion":"23","administratorLogin":"portaltestuser","state":"Ready","availabilityZone":"2","backup":{"backupRetentionDays":7,"geoRedundantBackup":"Enabled","earliestRestoreDate":"2025-12-01T22:55:29.9140438+00:00"},"highAvailability":{"mode":"Disabled","state":"NotEnabled"},"maintenanceWindow":{"customWindow":"Disabled","dayOfWeek":0,"startHour":0,"startMinute":0},"replicationRole":"Primary","replicaCapacity":5},"location":"East
        US 2 EUAP","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap","name":"autobot-e2e-pg-fs-eastus2euap","type":"Microsoft.DBforPostgreSQL/flexibleServers"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1252'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sun, 07 Dec 2025 23:36:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-throttling-version:
      - v2
      x-msedge-ref:
      - 'Ref A: B8953190620B4132A37F66ADB95DA841 Ref B: MNZ221060609021 Ref C: 2025-12-07T23:36:24Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - postgres flexible-server migration list
      Connection:
      - keep-alive
      ParameterSetName:
      - --subscription --resource-group --name --filter
      User-Agent:
      - AZURECLI/2.81.0 azsdk-python-core/1.35.0 Python/3.13.10 (Windows-11-10.0.26200-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap/migrations?api-version=2025-08-01&migrationListFilter=Active
  response:
    body:
      string: '{"value":[{"properties":{"migrationId":"fea9ad5c-8777-4632-8084-89aa434e6066","currentStatus":{"state":"CleaningUp","error":"S0004:
        Failed to fetch source server details. Please make sure source server is in
        available state and is accepting connections, before retrying the migration.","currentSubStateDetails":{"currentSubState":"CompletingMigration","dbDetails":{}}},"migrationMode":"Offline","sourceDbServerResourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-singleserver-resourcegroup/providers/Microsoft.DBforPostgreSQL/servers/autobot-orcas-postgresql-ss","targetDbServerResourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap","dbsToMigrate":["postgres"],"setupLogicalReplicationOnSourceDbIfNeeded":"False","overwriteDbsInTarget":"True","migrationWindowStartTimeInUtc":"2025-12-07T23:36:23.9782489Z","triggerCutover":"True","migrateRoles":"False","migrationOption":"ValidateAndMigrate","sourceType":"PostgreSQLSingleServer","sslMode":"VerifyFull"},"location":"East
        US 2 EUAP","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap/migrations/30799ac7-f723-4bf5-930d-34d1affac030","name":"30799ac7-f723-4bf5-930d-34d1affac030","type":"Microsoft.DBforPostgreSQL/flexibleServers/migrations"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1513'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sun, 07 Dec 2025 23:36:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=f57d2932-2a78-450f-958a-e65997c3253b/eastus2euap/7b98c21a-c362-4dcb-9c45-917c41cad696
      x-ms-throttling-version:
      - v2
      x-msedge-ref:
      - 'Ref A: CD687FBA664F4EB0AF8884793D20D773 Ref B: BL2AA2011004040 Ref C: 2025-12-07T23:36:24Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - postgres flexible-server migration list
      Connection:
      - keep-alive
      ParameterSetName:
      - --subscription --resource-group --name
      User-Agent:
      - AZURECLI/2.81.0 azsdk-python-core/1.35.0 Python/3.13.10 (Windows-11-10.0.26200-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap?api-version=2025-08-01
  response:
    body:
      string: '{"sku":{"name":"Standard_D4s_v3","tier":"GeneralPurpose"},"systemData":{"createdAt":"2023-06-15T13:30:19.1651160Z"},"properties":{"replica":{"role":"Primary","capacity":5},"storage":{"type":"","iops":120,"tier":"P4","storageSizeGB":32,"autoGrow":"Disabled"},"network":{"publicNetworkAccess":"Enabled"},"dataEncryption":{"type":"SystemManaged"},"authConfig":{"activeDirectoryAuth":"Disabled","passwordAuth":"Enabled"},"fullyQualifiedDomainName":"autobot-e2e-pg-fs-eastus2euap.postgres.database.azure.com","version":"13","minorVersion":"23","administratorLogin":"portaltestuser","state":"Ready","availabilityZone":"2","backup":{"backupRetentionDays":7,"geoRedundantBackup":"Enabled","earliestRestoreDate":"2025-12-01T22:55:29.9140438+00:00"},"highAvailability":{"mode":"Disabled","state":"NotEnabled"},"maintenanceWindow":{"customWindow":"Disabled","dayOfWeek":0,"startHour":0,"startMinute":0},"replicationRole":"Primary","replicaCapacity":5},"location":"East
        US 2 EUAP","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap","name":"autobot-e2e-pg-fs-eastus2euap","type":"Microsoft.DBforPostgreSQL/flexibleServers"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1252'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sun, 07 Dec 2025 23:36:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-throttling-version:
      - v2
      x-msedge-ref:
      - 'Ref A: 8D7CC8A404B644EE80562B0A8C855358 Ref B: BL2AA2011004040 Ref C: 2025-12-07T23:36:24Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - postgres flexible-server migration list
      Connection:
      - keep-alive
      ParameterSetName:
      - --subscription --resource-group --name
      User-Agent:
      - AZURECLI/2.81.0 azsdk-python-core/1.35.0 Python/3.13.10 (Windows-11-10.0.26200-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap/migrations?api-version=2025-08-01&migrationListFilter=Active
  response:
    body:
      string: '{"value":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '12'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sun, 07 Dec 2025 23:36:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=f57d2932-2a78-450f-958a-e65997c3253b/eastus2euap/915ef6f3-4517-4224-b5f6-cab51b835a60
      x-ms-throttling-version:
      - v2
      x-msedge-ref:
      - 'Ref A: 50352D7367804418843B855A6E776BA3 Ref B: MNZ221060609047 Ref C: 2025-12-07T23:36:24Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - postgres flexible-server migration show
      Connection:
      - keep-alive
      ParameterSetName:
      - --subscription --resource-group --name --migration-name
      User-Agent:
      - AZURECLI/2.81.0 azsdk-python-core/1.35.0 Python/3.13.10 (Windows-11-10.0.26200-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap?api-version=2025-08-01
  response:
    body:
      string: '{"sku":{"name":"Standard_D4s_v3","tier":"GeneralPurpose"},"systemData":{"createdAt":"2023-06-15T13:30:19.1651160Z"},"properties":{"replica":{"role":"Primary","capacity":5},"storage":{"type":"","iops":120,"tier":"P4","storageSizeGB":32,"autoGrow":"Disabled"},"network":{"publicNetworkAccess":"Enabled"},"dataEncryption":{"type":"SystemManaged"},"authConfig":{"activeDirectoryAuth":"Disabled","passwordAuth":"Enabled"},"fullyQualifiedDomainName":"autobot-e2e-pg-fs-eastus2euap.postgres.database.azure.com","version":"13","minorVersion":"23","administratorLogin":"portaltestuser","state":"Ready","availabilityZone":"2","backup":{"backupRetentionDays":7,"geoRedundantBackup":"Enabled","earliestRestoreDate":"2025-12-01T22:55:29.9140438+00:00"},"highAvailability":{"mode":"Disabled","state":"NotEnabled"},"maintenanceWindow":{"customWindow":"Disabled","dayOfWeek":0,"startHour":0,"startMinute":0},"replicationRole":"Primary","replicaCapacity":5},"location":"East
        US 2 EUAP","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap","name":"autobot-e2e-pg-fs-eastus2euap","type":"Microsoft.DBforPostgreSQL/flexibleServers"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1252'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sun, 07 Dec 2025 23:36:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-throttling-version:
      - v2
      x-msedge-ref:
      - 'Ref A: 7AB282E0B0EA428386E53DAD6637C8E1 Ref B: MNZ221060610025 Ref C: 2025-12-07T23:36:25Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - postgres flexible-server migration show
      Connection:
      - keep-alive
      ParameterSetName:
      - --subscription --resource-group --name --migration-name
      User-Agent:
      - AZURECLI/2.81.0 azsdk-python-core/1.35.0 Python/3.13.10 (Windows-11-10.0.26200-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap/migrations/30799ac7-f723-4bf5-930d-34d1affac030?api-version=2025-08-01
  response:
    body:
      string: '{"properties":{"migrationId":"fea9ad5c-8777-4632-8084-89aa434e6066","currentStatus":{"state":"Failed","error":"S0004:
        Failed to fetch source server details. Please make sure source server is in
        available state and is accepting connections, before retrying the migration.","currentSubStateDetails":{"currentSubState":"Completed","dbDetails":{}}},"migrationMode":"Offline","migrationWindowEndTimeInUtc":"2025-12-07T23:36:24.885603Z","sourceDbServerResourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-singleserver-resourcegroup/providers/Microsoft.DBforPostgreSQL/servers/autobot-orcas-postgresql-ss","targetDbServerResourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap","dbsToMigrate":["postgres"],"setupLogicalReplicationOnSourceDbIfNeeded":"False","overwriteDbsInTarget":"True","migrationWindowStartTimeInUtc":"2025-12-07T23:36:23.9782489Z","triggerCutover":"True","migrateRoles":"False","migrationOption":"ValidateAndMigrate","sourceType":"PostgreSQLSingleServer","sslMode":"VerifyFull"},"location":"East
        US 2 EUAP","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap/migrations/30799ac7-f723-4bf5-930d-34d1affac030","name":"30799ac7-f723-4bf5-930d-34d1affac030","type":"Microsoft.DBforPostgreSQL/flexibleServers/migrations"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1547'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sun, 07 Dec 2025 23:36:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47,objectId=f57d2932-2a78-450f-958a-e65997c3253b/eastus2euap/5950ec1c-115d-4c15-bf61-031487efc7f1
      x-ms-throttling-version:
      - v2
      x-msedge-ref:
      - 'Ref A: 46865D692E14490D935C6C9B1C2821D7 Ref B: BL2AA2011005025 Ref C: 2025-12-07T23:36:25Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - postgres flexible-server migration update
      Connection:
      - keep-alive
      ParameterSetName:
      - --subscription --resource-group --name --migration-name
      User-Agent:
      - AZURECLI/2.81.0 azsdk-python-core/1.35.0 Python/3.13.10 (Windows-11-10.0.26200-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap?api-version=2025-08-01
  response:
    body:
      string: '{"sku":{"name":"Standard_D4s_v3","tier":"GeneralPurpose"},"systemData":{"createdAt":"2023-06-15T13:30:19.1651160Z"},"properties":{"replica":{"role":"Primary","capacity":5},"storage":{"type":"","iops":120,"tier":"P4","storageSizeGB":32,"autoGrow":"Disabled"},"network":{"publicNetworkAccess":"Enabled"},"dataEncryption":{"type":"SystemManaged"},"authConfig":{"activeDirectoryAuth":"Disabled","passwordAuth":"Enabled"},"fullyQualifiedDomainName":"autobot-e2e-pg-fs-eastus2euap.postgres.database.azure.com","version":"13","minorVersion":"23","administratorLogin":"portaltestuser","state":"Ready","availabilityZone":"2","backup":{"backupRetentionDays":7,"geoRedundantBackup":"Enabled","earliestRestoreDate":"2025-12-01T22:55:29.9140438+00:00"},"highAvailability":{"mode":"Disabled","state":"NotEnabled"},"maintenanceWindow":{"customWindow":"Disabled","dayOfWeek":0,"startHour":0,"startMinute":0},"replicationRole":"Primary","replicaCapacity":5},"location":"East
        US 2 EUAP","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/autobot-resourcegroup-pg-eastus2euap/providers/Microsoft.DBforPostgreSQL/flexibleServers/autobot-e2e-pg-fs-eastus2euap","name":"autobot-e2e-pg-fs-eastus2euap","type":"Microsoft.DBforPostgreSQL/flexibleServers"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1252'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sun, 07 Dec 2025 23:36:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-throttling-version:
      - v2
      x-msedge-ref:
      - 'Ref A: A88EBFABD2CE4617ABC7D749A3607A8B Ref B: MNZ221060608045 Ref C: 2025-12-07T23:36:25Z'
    status:
      code: 200
      message: OK
version: 1
